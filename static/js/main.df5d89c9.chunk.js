(this["webpackJsonptodolist-redux-toolkit"]=this["webpackJsonptodolist-redux-toolkit"]||[]).push([[0],{100:function(t,e,a){t.exports=a(129)},105:function(t,e,a){},106:function(t,e,a){},129:function(t,e,a){"use strict";a.r(e);var r={};a.r(r),a.d(r,"selectStatus",(function(){return y})),a.d(r,"selectIsInitialized",(function(){return O}));var n={};a.r(n),a.d(n,"selectIsLoggedIn",(function(){return it}));var s=a(0),o=a.n(s),i=a(9),c=a.n(i);a(105),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(106);var l,u,d=a(172),p=a(173),f=a(174),m=a(164),b=a(131),v=a(169),h=a(176),g=a(177),E=a(175),k=a(182),j=a(179),C=a(22),y=function(t){return t.app.status},O=function(t){return t.app.isInitialized},A=a(7),x=a.n(A),I=a(15),w=a(20),S=a(81),T=a.n(S).a.create(Object(w.a)({baseURL:"https://social-network.samuraijs.com/api/1.1/"},{withCredentials:!0,headers:{"API-KEY":"78abceff-cb7c-4815-8b56-016c67d0625d"}})),L=function(t){return T.post("auth/login",t)},z=function(){return T.get("auth/me")},R=function(){return T.delete("auth/login")},W=function(){return T.get("todo-lists")},P=function(t){return T.post("todo-lists",{title:t})},V=function(t){return T.delete("todo-lists/".concat(t))},F=function(t,e){return T.put("todo-lists/".concat(t),{title:e})},D=function(t){return T.get("todo-lists/".concat(t,"/tasks"))},M=function(t,e){return T.delete("todo-lists/".concat(t,"/tasks/").concat(e))},N=function(t,e){return T.post("todo-lists/".concat(t,"/tasks"),{title:e})},q=function(t,e,a){return T.put("todo-lists/".concat(t,"/tasks/").concat(e),a)};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(l||(l={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(u||(u={}));var B=function(t,e){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];a&&e(rt.setAppErrorAC({error:t.messages.length?t.messages[0]:"Some error occurred"})),e(rt.setAppStatusAC({status:"failed"}))},H=function(t,e){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];a&&e(rt.setAppErrorAC({error:t.message?t.message:"Some error occurred"})),e(rt.setAppStatusAC({status:"failed"}))},U=function(t,e,a){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return r&&e(rt.setAppErrorAC({error:t.message?t.message:"Some error occurred"})),e(rt.setAppStatusAC({status:"failed"})),a({errors:[t.message],fieldsErrors:void 0})},Z=function(t,e,a){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return r&&e(rt.setAppErrorAC({error:t.messages.length?t.messages[0]:"Some error occurred"})),e(rt.setAppStatusAC({status:"failed"})),a({errors:t.messages,fieldsErrors:t.fieldsErrors})},J=a(16),K=Object(J.b)("auth/login",function(){var t=Object(I.a)(x.a.mark((function t(e,a){var r,n,s,o;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.dispatch,n=a.rejectWithValue,r(rt.setAppStatusAC({status:"loading"})),t.prev=2,t.next=5,L(e);case 5:if(0!==(s=t.sent).data.resultCode){t.next=11;break}return r(rt.setAppStatusAC({status:"succeeded"})),t.abrupt("return");case 11:return B(s.data,r),t.abrupt("return",n({errors:s.data.messages,fieldsErrors:s.data.fieldsErrors}));case 13:t.next=20;break;case 15:return t.prev=15,t.t0=t.catch(2),o=t.t0,H(o,r),t.abrupt("return",n({errors:[o.message],fieldsErrors:void 0}));case 20:case"end":return t.stop()}}),t,null,[[2,15]])})));return function(e,a){return t.apply(this,arguments)}}()),$=Object(J.b)("auth/logout",function(){var t=Object(I.a)(x.a.mark((function t(e,a){var r,n,s;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.dispatch,n=a.rejectWithValue,r(rt.setAppStatusAC({status:"loading"})),t.next=4,R();case 4:if(s=t.sent,t.prev=5,0!==s.data.resultCode){t.next=11;break}return r(rt.setAppStatusAC({status:"succeeded"})),t.abrupt("return");case 11:return B(s.data,r),t.abrupt("return",n({}));case 13:t.next=19;break;case 15:return t.prev=15,t.t0=t.catch(5),H(t.t0,r),t.abrupt("return",n({}));case 19:case"end":return t.stop()}}),t,null,[[5,15]])})));return function(e,a){return t.apply(this,arguments)}}()),_={logout:$,login:K},X=Object(J.c)({name:"auth",initialState:{isLoggedIn:!1},reducers:{setIsLoggedInAC:function(t,e){t.isLoggedIn=e.payload.isLoggedIn}},extraReducers:function(t){t.addCase(K.fulfilled,(function(t){t.isLoggedIn=!0})),t.addCase($.fulfilled,(function(t){t.isLoggedIn=!1}))}}),Y=X.actions.setIsLoggedInAC,G=Object(J.b)("app/initializeApp",function(){var t=Object(I.a)(x.a.mark((function t(e,a){var r,n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.dispatch,t.next=3,z();case 3:0===(n=t.sent).data.resultCode?r(Y({isLoggedIn:!0})):B(n.data,r);case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()),Q={initializeApp:G},tt=Object(J.c)({name:"app",initialState:{status:"idle",error:null,isInitialized:!1},reducers:{setAppErrorAC:function(t,e){t.error=e.payload.error},setAppStatusAC:function(t,e){t.status=e.payload.status}},extraReducers:function(t){t.addCase(G.fulfilled,(function(t){t.isInitialized=!0}))}}),et=tt.actions,at=(et.setAppErrorAC,et.setAppStatusAC,tt.reducer),rt=tt.actions;function nt(t){return o.a.createElement(j.a,Object.assign({elevation:6,variant:"filled"},t))}function st(){var t=Object(C.c)((function(t){return t.app.error})),e=Object(C.b)(),a=function(t,a){"clickaway"!==a&&e(rt.setAppErrorAC({error:null}))},r=null!==t;return o.a.createElement(k.a,{open:r,autoHideDuration:6e3,onClose:a},o.a.createElement(nt,{onClose:a,severity:"error"},t))}var ot=a(14),it=function(t){return t.auth.isLoggedIn},ct=a(165),lt=a(183),ut=a(166),dt=a(167),pt=a(178),ft=a(168),mt=a(180),bt=a(87),vt=a(23),ht=function(){return Object(C.b)()};function gt(t){var e=ht();return Object(s.useMemo)((function(){return Object(vt.b)(t,e)}),[])}var Et=function(){var t=ht(),e=Object(C.c)(n.selectIsLoggedIn),a=Object(bt.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(t){var e={};return t.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t.email)||(e.email="Invalid email address"):e.email="Required",t.password?t.password.length<2&&(e.password="Must be more than 2 characters"):e.password="Required",e},onSubmit:function(){var e=Object(I.a)(x.a.mark((function e(a,r){var n,s,o,i,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(kt.login(a));case 2:n=e.sent,kt.login.rejected.match(n)&&(null===(s=n.payload)||void 0===s||null===(o=s.fieldsErrors)||void 0===o?void 0:o.length)&&(c=null===(i=n.payload)||void 0===i?void 0:i.fieldsErrors[0],r.setFieldError(c.field,c.error));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()});return e?o.a.createElement(ot.a,{to:"/"}):o.a.createElement("form",{onSubmit:a.handleSubmit},o.a.createElement(ct.a,{container:!0,justify:"center"},o.a.createElement(ct.a,{item:!0,xs:4},o.a.createElement(lt.a,null,o.a.createElement(ut.a,null,o.a.createElement("p",null,"To log in get registered",o.a.createElement("a",{href:"https://social-network.samuraijs.com/",target:"_blank"},"here")),o.a.createElement("p",null,"or use common test account credentials:"),o.a.createElement("p",null,"Email: free@samuraijs.com"),o.a.createElement("p",null,"Password: free")),o.a.createElement(dt.a,null,o.a.createElement(pt.a,Object.assign({label:"Email",margin:"normal"},a.getFieldProps("email"))),a.errors.email?o.a.createElement("div",{style:{color:"red"}},a.errors.email):null,o.a.createElement(pt.a,Object.assign({type:"password",label:"Password",margin:"normal"},a.getFieldProps("password"))),a.errors.password?o.a.createElement("div",{style:{color:"red"}},a.errors.password):null,o.a.createElement(ft.a,{label:"Remember me",control:o.a.createElement(mt.a,a.getFieldProps("rememberMe"))}),o.a.createElement(v.a,{type:"submit",variant:"contained",color:"primary"},"Login"))))),";")},kt=Object(w.a)(Object(w.a)({},_),X.actions),jt=X.reducer,Ct=Object(J.b)("todolists/fetchTodoLists",function(){var t=Object(I.a)(x.a.mark((function t(e,a){var r,n,s;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.dispatch,n=a.rejectWithValue,r(rt.setAppStatusAC({status:"loading"})),t.next=4,W();case 4:return s=t.sent,t.prev=5,r(rt.setAppStatusAC({status:"succeeded"})),t.abrupt("return",{todolists:s.data});case 10:return t.prev=10,t.t0=t.catch(5),H(t.t0,r),t.abrupt("return",n(null));case 14:case"end":return t.stop()}}),t,null,[[5,10]])})));return function(e,a){return t.apply(this,arguments)}}()),yt=Object(J.b)("todolists/removeTodolist",function(){var t=Object(I.a)(x.a.mark((function t(e,a){var r,n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.dispatch,n=a.rejectWithValue,r(rt.setAppStatusAC({status:"loading"})),r(wt({id:e,status:"loading"})),t.next=5,V(e);case 5:return t.sent,t.prev=6,r(rt.setAppStatusAC({status:"succeeded"})),t.abrupt("return",{id:e});case 11:return t.prev=11,t.t0=t.catch(6),H(t.t0,r),t.abrupt("return",n(null));case 15:case"end":return t.stop()}}),t,null,[[6,11]])})));return function(e,a){return t.apply(this,arguments)}}()),Ot=Object(J.b)("todolists/addTodolist",function(){var t=Object(I.a)(x.a.mark((function t(e,a){var r,n,s;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.dispatch,n=a.rejectWithValue,r(rt.setAppStatusAC({status:"loading"})),t.prev=2,t.next=6,P(e);case 6:if(0!==(s=t.sent).data.resultCode){t.next=12;break}return r(rt.setAppStatusAC({status:"succeeded"})),t.abrupt("return",{todolist:s.data.data.item});case 12:return t.abrupt("return",Z(s.data,r,n,!0));case 13:t.next=18;break;case 15:return t.prev=15,t.t0=t.catch(2),t.abrupt("return",U(t.t0,r,n,!1));case 18:case"end":return t.stop()}}),t,null,[[2,15]])})));return function(e,a){return t.apply(this,arguments)}}()),At=Object(J.b)("todolists/changeTodolistTitle",function(){var t=Object(I.a)(x.a.mark((function t(e,a){var r,n,s;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.dispatch,n=a.rejectWithValue,r(rt.setAppStatusAC({status:"loading"})),t.prev=2,t.next=5,F(e.id,e.title);case 5:if(0!==(s=t.sent).data.resultCode){t.next=11;break}return r(rt.setAppStatusAC({status:"succeeded"})),t.abrupt("return",{id:e.id,title:e.title});case 11:return B(s.data,r,!1),t.abrupt("return",n({errors:s.data.messages,fieldsErrors:s.data.fieldsErrors}));case 13:t.next=18;break;case 15:return t.prev=15,t.t0=t.catch(2),t.abrupt("return",U(t.t0,r,n,!1));case 18:case"end":return t.stop()}}),t,null,[[2,15]])})));return function(e,a){return t.apply(this,arguments)}}()),xt={fetchTodolists:Ct,removeTodolist:yt,addTodolist:Ot,changeTodolistTitle:At},It=Object(J.c)({name:"todolists",initialState:[],reducers:{changeTodolistFilter:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.id}));t[a].filter=e.payload.filter},changeTodolistEntityStatus:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.id}));t[a].entityStatus=e.payload.status}},extraReducers:function(t){t.addCase(Ct.fulfilled,(function(t,e){return e.payload.todolists.map((function(t){return Object(w.a)(Object(w.a)({},t),{},{filter:"all",entityStatus:"idle"})}))})),t.addCase(yt.fulfilled,(function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.id}));a>-1&&t.splice(a,1)})),t.addCase(Ot.fulfilled,(function(t,e){t.unshift(Object(w.a)(Object(w.a)({},e.payload.todolist),{},{filter:"all",entityStatus:"idle"}))})),t.addCase(At.fulfilled,(function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.id}));t[a].title=e.payload.title}))}}),wt=It.actions.changeTodolistEntityStatus,St=Object(J.b)("tasks/fetchTasks",function(){var t=Object(I.a)(x.a.mark((function t(e,a){var r,n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.dispatch(rt.setAppStatusAC({status:"loading"})),t.next=3,D(e);case 3:return r=t.sent,n=r.data.items,a.dispatch(rt.setAppStatusAC({status:"succeeded"})),t.abrupt("return",{tasks:n,todolistId:e});case 7:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()),Tt=Object(J.b)("tasks/removeTask",function(){var t=Object(I.a)(x.a.mark((function t(e,a){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.dispatch(rt.setAppStatusAC({status:"loading"})),t.next=3,M(e.todolistId,e.taskId);case 3:return t.sent,a.dispatch(rt.setAppStatusAC({status:"succeeded"})),t.abrupt("return",{taskId:e.taskId,todolistId:e.todolistId});case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()),Lt=Object(J.b)("tasks/addTask",function(){var t=Object(I.a)(x.a.mark((function t(e,a){var r,n,s;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.dispatch,n=a.rejectWithValue,r(rt.setAppStatusAC({status:"loading"})),t.next=4,N(e.todolistId,e.title);case 4:if(s=t.sent,t.prev=5,0!==s.data.resultCode){t.next=11;break}return r(rt.setAppStatusAC({status:"succeeded"})),t.abrupt("return",s.data.data.item);case 11:return B(s.data,r,!1),t.abrupt("return",n({errors:s.data.messages,fieldsErrors:s.data.fieldsErrors}));case 13:t.next=18;break;case 15:return t.prev=15,t.t0=t.catch(5),t.abrupt("return",U(t.t0,r,n,!1));case 18:case"end":return t.stop()}}),t,null,[[5,15]])})));return function(e,a){return t.apply(this,arguments)}}()),zt=Object(J.b)("tasks/updateTask",function(){var t=Object(I.a)(x.a.mark((function t(e,a){var r,n,s,o,i,c,l;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a.dispatch,n=a.rejectWithValue,s=a.getState,o=s(),i=o.tasks[e.todolistId].find((function(t){return t.id===e.taskId}))){t.next=5;break}return t.abrupt("return",n("task not found in the state"));case 5:return c=Object(w.a)({deadline:i.deadline,description:i.description,priority:i.priority,startDate:i.startDate,title:i.title,status:i.status},e.model),t.next=8,q(e.todolistId,e.taskId,c);case 8:if(l=t.sent,t.prev=9,0!==l.data.resultCode){t.next=14;break}return t.abrupt("return",e);case 14:return B(l.data,r),t.abrupt("return",n(null));case 16:t.next=22;break;case 18:return t.prev=18,t.t0=t.catch(9),H(t.t0,r),t.abrupt("return",n(null));case 22:case"end":return t.stop()}}),t,null,[[9,18]])})));return function(e,a){return t.apply(this,arguments)}}()),Rt={fetchTasks:St,removeTask:Tt,addTask:Lt,updateTask:zt},Wt=Object(J.c)({name:"tasks",initialState:{},reducers:{},extraReducers:function(t){t.addCase(xt.removeTodolist.fulfilled,(function(t,e){delete t[e.payload.id]})),t.addCase(xt.fetchTodolists.fulfilled,(function(t,e){e.payload.todolists.forEach((function(e){t[e.id]=[]}))})),t.addCase(xt.addTodolist.fulfilled,(function(t,e){t[e.payload.todolist.id]=[]})),t.addCase(St.fulfilled,(function(t,e){t[e.payload.todolistId]=e.payload.tasks})),t.addCase(Tt.fulfilled,(function(t,e){var a=t[e.payload.todolistId],r=a.findIndex((function(t){return t.id===e.payload.taskId}));r>-1&&a.splice(r,1)})),t.addCase(Lt.fulfilled,(function(t,e){t[e.payload.todoListId].unshift(e.payload)})),t.addCase(zt.fulfilled,(function(t,e){var a=t[e.payload.todolistId],r=a.findIndex((function(t){return t.id===e.payload.taskId}));r>-1&&(a[r]=Object(w.a)(Object(w.a)({},a[r]),e.payload.model))}))}}),Pt=(Wt.reducer,a(47)),Vt=a(170),Ft=o.a.memo((function(t){var e=t.addItem,a=t.disabled,r=void 0!==a&&a,n=Object(s.useState)(""),i=Object(Pt.a)(n,2),c=i[0],l=i[1],u=Object(s.useState)(null),d=Object(Pt.a)(u,2),p=d[0],f=d[1],b=function(){""!==c.trim()?e(c,{setError:f,setTitle:l}):f("Title is required")};return o.a.createElement("div",null,o.a.createElement(pt.a,{variant:"outlined",disabled:r,error:!!p,value:c,onChange:function(t){l(t.currentTarget.value)},onKeyPress:function(t){null!==p&&f(null),13===t.charCode&&b()},label:"Title",helperText:p}),o.a.createElement(m.a,{color:"primary",onClick:b,disabled:r,style:{marginLeft:"5px"}},o.a.createElement(Vt.a,null)))})),Dt=a(88),Mt=o.a.memo((function(t){var e=Object(s.useState)(!1),a=Object(Pt.a)(e,2),r=a[0],n=a[1],i=Object(s.useState)(t.value),c=Object(Pt.a)(i,2),l=c[0],u=c[1];return r?o.a.createElement(pt.a,{value:l,onChange:function(t){u(t.currentTarget.value)},autoFocus:!0,onBlur:function(){n(!1),t.onChange(l)}}):o.a.createElement("span",{onDoubleClick:function(){n(!0),u(t.value)}},t.value)})),Nt=a(130),qt=a(171),Bt=o.a.memo((function(t){var e=gt($t),a=e.updateTask,r=e.removeTask,n=Object(s.useCallback)((function(){return r({taskId:t.task.id,todolistId:t.todolistId})}),[t.task.id,t.todolistId]),i=Object(s.useCallback)((function(e){a({taskId:t.task.id,model:{status:e.currentTarget.checked?l.Completed:l.New},todolistId:t.todolistId})}),[t.task.id,t.todolistId]),c=Object(s.useCallback)((function(e){a({taskId:t.task.id,model:{title:e},todolistId:t.todolistId})}),[t.task.id,t.todolistId]);return o.a.createElement("div",{key:t.task.id,className:t.task.status===l.Completed?"is-done":"",style:{position:"relative"}},o.a.createElement(mt.a,{checked:t.task.status===l.Completed,color:"primary",onChange:i}),o.a.createElement(Mt,{value:t.task.title,onChange:c}),o.a.createElement(m.a,{onClick:n,style:{position:"absolute",top:"2px",right:"2px"}},o.a.createElement(qt.a,{fontSize:"small"})))})),Ht=o.a.memo((function(t){var e=t.demo,a=void 0!==e&&e,r=Object(Dt.a)(t,["demo"]),n=gt(Kt),i=n.changeTodolistFilter,c=n.removeTodolist,u=n.changeTodolistTitle,d=gt($t).fetchTasks,p=ht();Object(s.useEffect)((function(){a||d(r.todolist.id)}),[]);var f=Object(s.useCallback)(function(){var t=Object(I.a)(x.a.mark((function t(e,a){var n,s,o,i,c,l;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=$t.addTask({title:e,todolistId:r.todolist.id}),t.next=3,p(n);case 3:s=t.sent,$t.addTask.rejected.match(s)?(null===(o=s.payload)||void 0===o||null===(i=o.errors)||void 0===i?void 0:i.length)?(l=null===(c=s.payload)||void 0===c?void 0:c.errors[0],a.setError(l)):a.setError("Some error occurred"):a.setTitle("");case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),[r.todolist.id]),b=Object(s.useCallback)((function(t){u({id:r.todolist.id,title:t})}),[r.todolist.id]),h=Object(s.useCallback)((function(t){return i({filter:t,id:r.todolist.id})}),[r.todolist.id]),g=r.tasks;"active"===r.todolist.filter&&(g=r.tasks.filter((function(t){return t.status===l.New}))),"completed"===r.todolist.filter&&(g=r.tasks.filter((function(t){return t.status===l.Completed})));var E=function(t,e,a){return o.a.createElement(v.a,{variant:r.todolist.filter===e?"outlined":"text",onClick:function(){return h(e)},color:t},a)};return o.a.createElement(Nt.a,{style:{padding:"10px",position:"relative"}},o.a.createElement(m.a,{onClick:function(){c(r.todolist.id)},disabled:"loading"===r.todolist.entityStatus,style:{position:"absolute",right:"5px",top:"5px"},size:"small"},o.a.createElement(qt.a,{fontSize:"small"})),o.a.createElement("h3",null,o.a.createElement(Mt,{value:r.todolist.title,onChange:b})),o.a.createElement(Ft,{addItem:f,disabled:"loading"===r.todolist.entityStatus}),o.a.createElement("div",null,g.map((function(t){return o.a.createElement(Bt,{key:t.id,task:t,todolistId:r.todolist.id})})),!g.length&&o.a.createElement("div",{style:{padding:"10px",color:"gray"}},"Create your first task")),o.a.createElement("div",{style:{paddingTop:"10px"}},E("default","all","ALL"),E("primary","active","ACTIVE"),E("secondary","completed","COMPLETED")))})),Ut=function(t){var e=t.demo,a=void 0!==e&&e,r=Object(C.c)((function(t){return t.todolists})),n=Object(C.c)((function(t){return t.tasks})),i=Object(C.c)(it),c=gt(Kt).fetchTodolists,l=ht(),u=Object(s.useCallback)(function(){var t=Object(I.a)(x.a.mark((function t(e,a){var r,n,s,o,i,c;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Kt.addTodolist(e),t.next=3,l(r);case 3:n=t.sent,Kt.addTodolist.rejected.match(n)?(null===(s=n.payload)||void 0===s||null===(o=s.errors)||void 0===o?void 0:o.length)?(c=null===(i=n.payload)||void 0===i?void 0:i.errors[0],a.setError(c)):a.setError("Some error occurred"):a.setTitle("");case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),[]);return Object(s.useEffect)((function(){!a&&i&&c()}),[]),i?o.a.createElement(o.a.Fragment,null,o.a.createElement(ct.a,{container:!0,style:{padding:"20px"}},o.a.createElement(Ft,{addItem:u})),o.a.createElement(ct.a,{container:!0,spacing:3,style:{flexWrap:"nowrap",overflowX:"scroll"}},r.map((function(t){var e=n[t.id];return o.a.createElement(ct.a,{item:!0,key:t.id},o.a.createElement("div",{style:{width:"300px"}},o.a.createElement(Ht,{todolist:t,tasks:e,demo:a})))})))):o.a.createElement(ot.a,{to:"/login"})},Zt=Wt.reducer,Jt=It.reducer,Kt=Object(w.a)(Object(w.a)({},xt),It.actions),$t=Object(w.a)(Object(w.a)({},Rt),Wt.actions),_t=function(t){var e=t.demo,a=void 0!==e&&e,i=Object(C.c)(r.selectStatus),c=Object(C.c)(r.selectIsInitialized),l=Object(C.c)(n.selectIsLoggedIn),u=Object(C.b)();Object(s.useEffect)((function(){u(Q.initializeApp())}),[]);var k=Object(s.useCallback)((function(){u(kt.logout())}),[]);return c?o.a.createElement("div",{className:"App"},o.a.createElement(st,null),o.a.createElement(p.a,{position:"static"},o.a.createElement(f.a,null,o.a.createElement(m.a,{edge:"start",color:"inherit","aria-label":"menu"},o.a.createElement(E.a,null)),o.a.createElement(b.a,{variant:"h6"},"News"),l&&o.a.createElement(v.a,{color:"inherit",onClick:k},"Log out")),"loading"===i&&o.a.createElement(h.a,null)),o.a.createElement(g.a,{fixed:!0},o.a.createElement(ot.d,null,o.a.createElement(ot.b,{exact:!0,path:"/",render:function(){return o.a.createElement(Ut,{demo:a})}}),o.a.createElement(ot.b,{path:"/login",render:function(){return o.a.createElement(Et,null)}}),o.a.createElement(ot.b,{path:"/404",render:function(){return o.a.createElement("h1",null,"404 ERROR")}}),o.a.createElement(ot.a,{from:"*",to:"/404"})))):o.a.createElement("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"}},o.a.createElement(d.a,null))},Xt=a(50),Yt=Object(vt.c)({tasks:Zt,todolists:Jt,app:at,auth:jt}),Gt=Object(J.a)({reducer:Yt,middleware:function(t){return t().prepend(Xt.a)}});window.store=Gt;var Qt=a(49);c.a.render(o.a.createElement(C.a,{store:Gt},o.a.createElement(Qt.a,null,o.a.createElement(_t,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[100,1,2]]]);
//# sourceMappingURL=main.df5d89c9.chunk.js.map